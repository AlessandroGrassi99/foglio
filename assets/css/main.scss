@font-face {
  font-family: "Latin Modern Roman";
  src: url("/fonts/lmroman/LMRoman10-Regular.woff2") format("woff2"),
       url("/fonts/lmroman/LMRoman10-Regular.woff") format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Latin Modern Roman";
  src: url("/fonts/lmroman/LMRoman10-Italic.woff2") format("woff2"),
       url("/fonts/lmroman/LMRoman10-Italic.woff") format("woff");
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}
@font-face {
  font-family: "Latin Modern Roman";
  src: url("/fonts/lmroman/LMRoman10-Bold.woff2") format("woff2"),
       url("/fonts/lmroman/LMRoman10-Bold.woff") format("woff");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Latin Modern Roman";
  src: url("/fonts/lmroman/LMRoman10-BoldItalic.woff2") format("woff2"),
       url("/fonts/lmroman/LMRoman10-BoldItalic.woff") format("woff");
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

/* ===== Design tokens ===== */
:root{
  --bg: #fff;
  --ink: #111;
  --ink-muted: #555;
  --rule: #d9d9d9;
  --code-bg: #f6f6f6;

  --space-0: .5rem;
  --space-1: 1rem;
  --space-2: 1.5rem;
  --space-3: 2rem;
  --space-4: 3rem;

  --measure: 68ch; /* ~60–75 chars per line */
}

/* ===== Base / reset ===== */
*,*::before,*::after{ box-sizing: border-box; }
html{ -webkit-text-size-adjust:100%; color-scheme: light; }
body,h1,h2,h3,h4,h5,h6,p,figure{ margin:0; }
img,svg,video{ display:block; max-width:100%; height:auto; }

/* ===== Page ===== */
body{
  background: var(--bg);
  color: var(--ink);
  font-feature-settings: "liga","kern","onum","pnum";
  font-kerning: normal;
  font-variant-numeric: oldstyle-nums proportional-nums;
  /* robust serif stack; no external font dependency */
  font-family:
    "Latin Modern Roman", "CMU Serif", Georgia, "Times New Roman",
    ui-serif, "Iowan Old Style", "Palatino Linotype", "Source Serif 4",
    "EB Garamond", Georgia, "Times New Roman",
    "Noto Serif", "Noto Serif CJK SC", "Songti SC",
    "Hiragino Mincho ProN", "Yu Mincho", serif;
  line-height: 1.2;
  font-size: clamp(1rem, calc(0.9rem + 0.5vw), 1.125rem);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  padding: var(--space-3) 5vw;
}

/* Hugo wrapper: keep text to a book-like measure */
.w{ max-width: var(--measure); margin-inline:auto; }

/* ===== Type ===== */
p{ margin-block: 0; }
p + p{ margin-top: var(--space-1); }
article p{
  text-align: justify;
  text-justify: inter-word;
  hyphens: auto;
}

h1,h2,h3,h4{
  font-weight:600;
  line-height:1.2;
  text-wrap: balance;
  margin-top: var(--space-2);
}
h1{ font-size: clamp(1.8rem, calc(1.3rem + 1.8vw), 2.4rem); margin-bottom: var(--space-1); }
h2{ font-size: clamp(1.3rem, calc(1.05rem + 0.9vw), 1.6rem);  margin-bottom: var(--space-0); }
h3{ font-size: clamp(1.1rem, calc(1.0rem + 0.45vw), 1.3rem);  margin-bottom: var(--space-0); }

blockquote{
  margin-block: var(--space-2);
  padding-left: 1rem;
  border-left: 1px solid var(--rule);
  color: var(--ink-muted);
  font-style: italic;
}

hr{
  border:0;
  border-top:1px solid var(--rule);
  margin-block: var(--space-3);
  width:3rem;
}

/* ===== List spacing ===== */
ul,ol{ padding-left: 1.25rem; margin-block: var(--space-0); }

/* tighter spacing for nested lists */
li > ul,
li > ol{ margin-block: .25rem; }      /* or 0 if you want completely flush */

/* also handle deeper nesting just in case */
ul ul, ul ol, ol ul, ol ol{ margin-block: .25rem; }

/* ===== Links (monochrome, readable underline) ===== */
a{
  color: inherit;
  text-decoration-thickness: from-font;
  text-underline-offset: .15em;
}
a:hover{ text-decoration-thickness: .12em; }
a:focus-visible{ outline:2px solid currentColor; outline-offset:.15em; }

/* ===== Code ===== */
code,pre,kbd,samp{
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas,
    "Liberation Mono","DejaVu Sans Mono","JetBrains Mono", monospace;
  font-size:.85em;
}
code{
  background: var(--code-bg);
}
pre{
  padding: var(--space-1);
  overflow: auto;
  background: var(--code-bg);
}
pre code{ background: transparent; }

.chroma,
.chroma .bg{ background-color: var(--code-bg) !important; }

/* ===== Figures ===== */
figure{ margin-block: var(--space-2); }
figcaption{ color: var(--ink-muted); font-size:.9em; margin-top:.5rem; }

/* Details / disclosure — linky summary with underlined triangle */
details{ margin-block: var(--space-1); }

summary{
  display: inline;                 /* no box */
  font-weight: 600;
  cursor: pointer;
  list-style: none;
  text-decoration-line: underline;
  text-decoration-thickness: from-font;
  text-underline-offset: .15em;
  text-decoration-skip-ink: auto;
}
summary:hover{ text-decoration-thickness: .12em; }
summary:focus-visible{ outline: 2px solid currentColor; outline-offset: .15em; }

summary::-webkit-details-marker{ display: none; } /* hide default marker */

summary::before{
  content: "▸";
  display: inline;                 /* <-- was inline-block */
  text-decoration: inherit;        /* carry the underline to the triangle */
}
details[open] summary::before{ content: "▾"; }

/* small gap below the summary line */
summary + *{ margin-top: .35rem; }

/* ===== Small niceties ===== */
.page-content, article{ text-wrap: pretty; hyphens: auto; }
:is(h1,h2,h3,h4,h5,h6) + :is(h1,h2,h3,h4,h5,h6){
  margin-top: var(--space-0);
}
:is(h1,h2,h3,h4,h5,h6) + p{
  margin-top: 0;
}
::selection{ background:#eee; }

/* Quiet meta and footer */
.post-meta, footer, .toc{ color: var(--ink-muted); }
.toc{ border:1px solid var(--rule); padding: var(--space-1); }

/* ===== Post list: two-column grid (date + title) ===== */
.postlist{
  display:grid;
  grid-template-columns: 10ch 1fr;
  gap:.35rem 1rem;
  margin-top: var(--space-1);
}
.postlist time{
  text-align:right;
  color: var(--ink-muted);
  font-variant-numeric: tabular-nums;
}

.postlist a{
  text-transform: capitalize;
}

/* ===== Accessibility ===== */
.skip-link{ position:absolute; left:-9999px; top:auto; }
.skip-link:focus{
  left:1rem; top:1rem; background:var(--bg); color:var(--ink);
  padding:.5rem .75rem; border:1px solid var(--ink); border-radius:.25rem;
}

/* ===== Print ===== */
@media print{
  body{ padding:0; }
  nav,.toc,footer{ display:none; }
  a{ text-decoration:none; }
}

.post-meta{
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  margin-bottom: var(--space-2);
}

.post-meta time{
  color: var(--ink-muted);
  font-variant-numeric: tabular-nums;
}

.post-meta a{
  color: var(--ink-muted);
  text-decoration: none;
  border-bottom: 1px solid transparent;
}
.post-meta a:hover{ border-bottom-color: currentColor; }
